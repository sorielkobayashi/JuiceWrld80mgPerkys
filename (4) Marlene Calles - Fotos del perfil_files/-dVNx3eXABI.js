/*!CK:149697368!*//*1419983523,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["O+iuT"]); }

__d("TimelineAppSectionConstants",[],function(a,b,c,d,e,f){e.exports={collectionTabKeyToAppTabKey:{friends_recent:"friends",friends_all:"friends",friends_mutual:"friends",photos_of:"photos",photos_all:"photos",photos_albums:"photos",likes_recent:null,info_all:"about",music_my_music:"music",music_favs:"music",music_playlists:"music",books_read:"books",books_favorite:"books",books_want:"books",recent_places:null,fitness_overview:"fitness",friends_featured:null,places_want:null,info_contact:null,fitness_running:"fitness",fitness_cycling:"fitness",friends_followers:"friends",friends_following:"friends",music_radio:"music",info_history:null,recent_games:"games",products_want:null,photos_archive:"photos",notes_my_notes:"notes",notes_drafts:"notes",notes_about_me:"notes",likes_other:"likes",video_movies_watch:"movies",video_tv_shows_watch:"tv",music_saved:"music",video_movies_want:"movies",video_tv_shows_want:"tv",video_movies_favorite:"movies",video_tv_shows_favorite:"tv",friends_high_school:"friends",friends_college:"friends",friends_work:"friends",friends_suggested:"friends",apps_like:"games",upcoming_events:"events",past_events:"events",likes_people:"likes",likes_sports:null,fitness_report:null,groups_member:"groups",music_heavy_rotation:"music",photos_album:"photos",photos_untagged:"photos",music_mutual:"music",likes_restaurants:"likes",likes_clothing:null,info_insights:null,apps_used:"games",games_play:"games",games_apps_saved:"games",video_movies_suggestions:"movies",video_tv_shows_suggestions:"tv",books_suggestions:"books",video_movies_top:"movies",saved_books:"saved",saved_movies:"saved",saved_tv_shows:"saved",saved_music:"saved",places_saved:"map",saved_links:"saved",sports_teams:"sports",likes_all:"likes",saved_places:"saved",saved_all:"saved",sports_athletes:"sports",sports_activities:null,saved_events:"saved",saved_archived:"saved",places_recent:"map",places_visited:"map",reviews_written:"reviews",likes_section_movies:"likes",likes_section_tv_shows:"likes",likes_section_books:"likes",likes_section_music:"likes",likes_section_sports_teams:"likes",place_visits_by_place_tag:null,places_cities:"map",place_visits_by_city:null,topic_visit_counts:"map",place_visits_by_topic:null,place_visit_stories:null,places_map:"map",likes_section_apps_and_games:"likes",likes_section_sports_athletes:"likes",places_cities_desktop:"map",saved_videos:"saved",saved_pages:"saved",friends_with_upcoming_birthdays:"friends",friends_current_city:"friends",friends_hometown:"friends",at_work_contact:null,place_reviews_written:"reviews",movie_reviews_written:"reviews",tv_show_reviews_written:"reviews",book_reviews_written:"reviews",info_about:null,info_all_relationships:null,info_contact_basic:null,info_edu_work:null,info_overview:null,info_places:null,info_at_work:null,info_year_overviews:null,followers:"friends",following:"friends",media_set:"photos",photos_stream:"photos",photos_synced:"photos",apps:"games"}};},null);
__d("TimelinePlacesSection",["TimelineAppSection","TimelinePlacesCollection"],function(a,b,c,d,e,f,g,h){for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l,m,n,o){"use strict";g.call(this,l,m,n,o);}k.prototype.hideCollection=function(l){"use strict";j.hideCollection.call(this,l);if(l instanceof h)l.hide();};k.prototype.showCollection=function(l){"use strict";j.showCollection.call(this,l);if(l instanceof h)l.show();};e.exports=k;},null);
__d("TimelineAppSectionFactory",["TimelineAppSection","TimelinePlacesSection"],function(a,b,c,d,e,f,g,h){var i="map";function j(){"use strict";}j.createFromArray=function(k){"use strict";return k.map(function(l){if(l.sk===i)return new h(l.controller,l.sk,l.label,l.title);return new g(l.controller,l.sk,l.label,l.title);});};e.exports=j;},null);
__d("TimelineURI",["ProfileTabConst","TimelineAppSectionConstants","URI","goURI"],function(a,b,c,d,e,f,g,h,i,j){var k={parseURI:function(l){l=i(l);var m=l.getQueryData(),n=l.getPath(),o=n.split('/').slice(1);if(o[0]=='people'||o[0]=='pages')o=o.slice(2);var p=m.sk||o[1]||g.TIMELINE;if(p==g.WALL)p=g.TIMELINE;var q=null,r=null;if(p==g.TIMELINE){r=parseInt(o[2],10)||null;q=parseInt(o[3],10)||null;}return {path:n,id:m.id||o[0],key:p,viewas:m.viewas?m.viewas:0,filter:m.filter?m.filter:null,year:r,month:q,friendship:!!m.and};},goToProfileID:function(l){j(i('/'+l),true);},getSKFromURI:function(l){var m=l.getQueryData().sk||l.getPath().split('/')[2];return h.collectionTabKeyToAppTabKey[m]||m;},getVanityFromURI:function(l){if(l.getQueryData().id)return l.getQueryData.id;return l.getPath().split('/')[1];}};e.exports=k;},null);
__d("TimelineMedley",["Arbiter","CSS","DOM","DOMQuery","ProfileOverviewDOMID","PageTransitions","ProfileTabUtils","TimelineAppSection","TimelineAppSectionFactory","TimelineMonitor","TimelineSection","TimelineURI","URI","ViewportBounds","$","csx","cx","ge","getElementPosition"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=2,aa=false;for(var ba in q)if(q.hasOwnProperty(ba))da[ba]=q[ba];var ca=q===null?null:q.prototype;da.prototype=Object.create(ca);da.prototype.constructor=da;da.__superConstructor__=q;function da(ea,fa,ga){"use strict";q.call(this,k.MEDLEY_ROOT);this._sectionBreaker=ga.breaker;o.createFromArray(ea).forEach(this.appendSection,this);p.monitorSection(this);this._lastLoadedSection=this.childSections.get(n.getIDBySK(fa)).setIsLoaded(true);q.setActiveSectionID(this._lastLoadedSection.id);if(aa&&this.isOverviewProfileTab())this.addSectionPlaceholders();var ha=s.getNextURI();this._vanity=r.getVanityFromURI(ha);this._sk=r.getSKFromURI(ha);l.registerHandler(this._transitionHandler.bind(this));}da.prototype.addSectionTeasers=function(){"use strict";if(!this.isOverviewProfileTab()){h.removeClass(this.getNode(),"_c4f");this.thawChildren();this.addSectionPlaceholders();this.addSectionBreak();}};da.prototype.addUpcomingSectionPlaceholders=function(ea,fa){"use strict";fa=fa||z;while(ea=ea.getNext())if(!this.addSectionPlaceholder(ea,ea.getPrev())&&--fa<=0)break;};da.prototype.addSectionPlaceholder=function(ea,fa,ga){"use strict";if(!ea.isLoaded()&&x(ea.nodeID))return false;if(!x(ea.nodeID)){i.insertAfter(fa.getNode(),ea.getNode());ea.createTriggerLoader(ga);return false;}return true;};da.prototype.addSectionBreak=function(){"use strict";if(this._lastLoadedSection.getNext()){i.insertAfter(this.childSections.getHead().getNode(),this._sectionBreaker);}else i.remove(this._sectionBreaker);};da.prototype.removeChildSection=function(ea){"use strict";this.childSections.remove(ea);if(this.childSections.getCount()==1)i.remove(this._sectionBreaker);};da.prototype.addSectionPlaceholders=function(){"use strict";this.addUpcomingSectionPlaceholders(this._lastLoadedSection);};da.prototype.getNode=function(){"use strict";return u(this.id);};da.prototype.isOverviewProfileTab=function(){"use strict";return m.isOverviewTab(this._sk);};da.prototype.toggleScrollLoad=function(ea){"use strict";aa=ea;if(ea){this.thawChildren();this.addSectionPlaceholders();}else this.freezeChildren();};da.prototype._transitionHandler=function(ea){"use strict";if(r.getVanityFromURI(ea)!==this._vanity)return false;var fa=r.getSKFromURI(ea);if(m.isTimelineTab(fa))return false;if(m.isOverviewTab(fa)){return false;}else{var ga=ea.getQueryData();if(!ga.next_cursor)return false;var ha=this.childSections.getHead();while(ha){if(ha._sk===fa){if(!ha._activeCollection||!j.scry(ha._activeCollection.getNode(),"._3t3")[0])return false;g.inform("save_facebar_query",true);setTimeout(this._transitionToSection.bind(this,ha,ga),0);return true;}ha=ha.getNext();}}return false;};da.prototype._transitionToSection=function(ea,fa){"use strict";var ga=y(ea.getNode()).y-t.getTop();i.scry(ea.getNode(),"._51k9").forEach(function(ja){h.removeClass(ja,"_51k9");});this._sk=ea._sk;q.setActiveSectionID(ea.id);ea.thaw();h.addClass(this.getNode(),"_c4f");this.freezeChildren();var ha=j.find(ea._activeCollection.getNode(),"._3t3");ea._activeCollection.addContentLoader(ha,fa.next_cursor);ea._activeCollection._contentLoader.load({node:ha});var ia=this.childSections.getHead();while(ia&&ia.id!==ea.id){ia.remove();ia=this.childSections.getHead();}q.inform('Medley/transitionToSection',ea.id);ea.scrollTo(ga<0?ga:0);l.transitionComplete();};da.loadToSection=function(ea,fa){"use strict";q.setActiveSectionID(ea);q.callWithSection(k.MEDLEY_ROOT,function(ga){var ha=ga.childSections.getHead(),ia=0;while(ha&&ha.id!==ea){ia++;ha=ha.getNext();}if(!ia)return fa(ha);ia--;ia&&ga.addUpcomingSectionPlaceholders(ga.childSections.getHead(),ia);ga.addSectionPlaceholder(ha,ha.getPrev(),true);var ja=ha.subscribe('loaded',function(){fa(ha);ja.unsubscribe();});});};da.scrollToSection=function(ea,fa,ga){"use strict";q.callWithSection(ea,function(ha){ha.scrollTo(fa,ga);});};da.toggleScrollLoad=function(ea){"use strict";aa=ea;q.callWithSection(k.MEDLEY_ROOT,function(fa){fa.toggleScrollLoad(ea);});};e.exports=da;},null);
__d("PhotoCreateButtonsVisibility",["Arbiter","CSS","csx","cx","DOMQuery","Event","Parent","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(q){var r=m.byClass(q,"_3cz");return k.find(r,"._69l");}var p={addHideClickListener:function(q){l.listen(q,'click',function(){h.hide(o(q));});},addShowClickListener:function(q){l.listen(q,'click',function(){h.show(o(q));});},hideButtons:function(q){var r=n('pagelet_timeline_medley_photos');h.hide(k.find(r,"._69l"));},showButtonOnTabChange:function(q){g.subscribe('Medley/tab-change',function(r){h.show(q);});}};e.exports=p;},null);